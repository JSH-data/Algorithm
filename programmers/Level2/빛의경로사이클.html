<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function solution(grid) {
        const answer = [];
        const dx = [-1, 1, 0, 0];
        const dy = [0, 0, -1, 1];

        const ch = Array.from({ length: grid.length }, () => []).map((v) => {
          for (let i = 0; i < grid[0].length; i++) c.push([0, 0, 0, 0]);
          return v;
        });

        for (let x = 0; x < grid.length; x++) {
          for (let y = 0; y < grid[0].length; y++) {
            for (let d = 0; d < dx.length; d++) {
              if (ch[x][y][d]) continue;
              const cnt = checker(x, y, d);
              if (cnt) answer.push(cnt);
            }
          }
        }
        function checker(x, y, d) {
          let cnt = 0; // 경로 수
          while (true) {
            if (ch[x][y][d]) break;
            ch[x][y][d] = 1;
            cnt++;

            x = x + dx[d];
            y = y + dy[d];

            if (x < 0) x = grid.length - 1;
            if (x >= grid.length) x = 0;
            if (y < 0) y = grid[0].length - 1;
            if (y >= grid[0].length) y = 0;
            d = nextDir(grid[x][y], d);
          }
          return cnt;
        }
      }
      function nextDir(block, dir) {
        if (block === "S") return dir;
        if (block === "L") return [2, 3, 1, 0][dir]; // 상하좌우
        if (block === "R") return [2, 3, 1, 0][dir];
      }
    </script>
  </body>
</html>
